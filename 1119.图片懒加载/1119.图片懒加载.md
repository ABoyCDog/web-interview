# 图片懒加载

## 1、前言

&emsp;&emsp;图片懒加载用在一些图片密集型的网站中，通过图片懒加载可以让一些不可视的图片，或者说不在当前视窗里的图片暂不去加载，避免一次加载过多图片导致请求阻塞，特别是在弱网环境或网速较慢的情况下，非常影响体验。通过懒加载就可以提高网页加载速度，提高用户体验。

- Medium 的超棒浏览体验

  [medium.com](https://medium.com/) 是近几年崛起的一个英语写作平台(需要科学上网)。Medium 致力于提供一个专注于写作和阅读的平台。

  - 超棒的 UI？ 也就是超棒的图片懒加载？
  - 广告少，好阅读？
  - 软文少，不是为了买东西，而是传授知识

  其中使用到的几种技术：

  - 1、使用 `aspect ratio box` 创建占位元素。
  - 2、在 html 解析时只加载一个小尺寸的图片，并且添加 blur 效果
  - 3、最后使用 js 选择性的加载真实图片

## Intersection Observer

&emsp;&emsp;InterSection Observer 提供了一种异步监测目标元素与祖先元素或 viewport 视窗相交情况变化的方法。

[MDN 上的 API 介绍](https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API)

## 总结

- 1、懒加载用户当前视窗的图片可以提升页面的加载性能
- 2、懒加载的思路是在 html 解析时先加载一个 placeholder 图片，最后再用 js 选择性的加载真实图片
- 3、如果需要滚动加载，可以使用 `InterSection Observer`的 API，是一个解决当前元素与祖先元素或 viewport 相交的问题的 API
- 4、对于固定尺寸个不固定尺寸的图片，我们可以选择不同的服务去获取 placeholder 图片
- 5、对于图片尺寸不确定引起的布局抖动问题，我们可以使用 `aspect ratio box` 来解决
